{"version":3,"sources":["api/post.ts","components/PostsList/PostsList.tsx","components/NewCommentForm/NewCommentForm.tsx","api/comments.ts","components/PostDetails/PostDetails.tsx","App.tsx","index.tsx"],"names":["BASE_URL","request","url","a","options","fetch","response","ok","Error","status","statusText","json","getUserPosts","userId","requestUrl","posts","postId","postDetails","comments","users","PostsList","selectedUserId","selectedPostId","handlePostId","useState","setPosts","useEffect","then","result","className","map","post","isPostSelected","id","title","type","onClick","NewCommentForm","addNewComment","name","setName","email","setEmail","body","setBody","onSubmit","event","preventDefault","placeholder","value","onChange","currentTarget","required","deleteComment","commentId","method","deletedPost","addComment","comment","headers","JSON","stringify","newComment","PostDetails","setPost","setComments","isHidden","setIsHidden","getPostDetails","getPostComments","handleAddComment","current","length","filter","App","handleUserId","setUsers","getUsers","htmlFor","target","user","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f845767c.chunk.js","sourcesContent":["const BASE_URL = 'https://mate.academy/students-api';\n\nexport const request = async (url: string, options = {}) => {\n  const response = await fetch(`${BASE_URL}${url}`, options);\n\n  if (!response.ok) {\n    throw new Error(`${response.status} - ${response.statusText}`);\n  }\n\n  return response.json();\n};\n\nexport const getUserPosts = async (userId = 0): Promise<Post[]> => {\n  let requestUrl = '/posts';\n\n  if (userId > 0) {\n    requestUrl += `?userId=${userId}`;\n  }\n\n  const posts = await request(requestUrl);\n\n  return posts;\n};\n\nexport async function getPostDetails(postId: number): Promise<Post> {\n  const postDetails = await request(`/posts/${postId}`);\n\n  return postDetails;\n}\n\nexport async function getPostComments(postId: number): Promise<PostComment[]> {\n  const comments = await request(`/comments?postId=${postId}`);\n\n  return comments;\n}\n\nexport async function getUsers(): Promise<User[]> {\n  const users = await request('/users');\n\n  return users;\n}\n","import React, { useState, useEffect } from 'react';\nimport './PostsList.scss';\n\nimport { getUserPosts } from '../../api/post';\n\ninterface State {\n  selectedUserId: number,\n  selectedPostId: number | null,\n  handlePostId: (value: number | null) => void,\n}\n\nexport const PostsList: React.FC<State> = ({ selectedUserId, selectedPostId, handlePostId }) => {\n  const [posts, setPosts] = useState<Post[]>([]);\n\n  useEffect(() => {\n    getUserPosts(selectedUserId)\n      .then(result => setPosts(result));\n  }, [selectedUserId]);\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\">\n        {posts.map(post => {\n          const isPostSelected = post.id === selectedPostId;\n\n          return (\n            <li\n              className=\"PostsList__item\"\n              key={post.id}\n            >\n              <div>\n                <b>{`[User #${post.userId}]:`}</b>\n                {post.title}\n              </div>\n              <button\n                type=\"button\"\n                className=\"PostsList__button button\"\n                onClick={() => {\n                  handlePostId(isPostSelected ? null : post.id);\n                }}\n              >\n                {isPostSelected ? 'Close' : 'Open'}\n              </button>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport './NewCommentForm.scss';\n\ninterface Props {\n  postId: number,\n  addNewComment: (comment: Partial<PostComment>) => void\n}\n\nexport const NewCommentForm: React.FC<Props> = ({ postId, addNewComment }) => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [body, setBody] = useState('');\n\n  const onSubmit: React.FormEventHandler = (event) => {\n    event.preventDefault();\n\n    addNewComment({\n      postId,\n      name,\n      email,\n      body,\n    });\n\n    setName('');\n    setEmail('');\n    setBody('');\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={onSubmit}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={name}\n          onChange={(event) => setName(event.currentTarget.value)}\n          required\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={email}\n          onChange={(event) => setEmail(event.currentTarget.value)}\n          required\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={body}\n          onChange={(event) => setBody(event.currentTarget.value)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import { request } from './post';\n\nexport const deleteComment = async (commentId: number) => {\n  const deletedPost = await request(`/comments/${commentId}`, {\n    method: 'DELETE',\n  });\n\n  return deletedPost;\n};\n\nexport const addComment = async (comment: Partial<PostComment>): Promise<PostComment> => {\n  const newComment: PostComment = await request('/comments', {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n    body: JSON.stringify(comment),\n  });\n\n  return newComment;\n};\n","import React, { useState, useEffect } from 'react';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\n\nimport { getPostDetails, getPostComments } from '../../api/post';\nimport { addComment, deleteComment } from '../../api/comments';\n\ninterface Props {\n  postId: number,\n}\n\nexport const PostDetails: React.FC<Props> = ({ postId }) => {\n  const [post, setPost] = useState<Post | null>(null);\n  const [comments, setComments] = useState<PostComment[]>([]);\n  const [isHidden, setIsHidden] = useState(false);\n\n  useEffect(() => {\n    getPostDetails(postId)\n      .then(result => {\n        setPost(result);\n      });\n\n    getPostComments(postId)\n      .then(result => {\n        setComments(result);\n      });\n  }, [postId]);\n\n  const handleDeleteComment = (commentId: number) => {\n    deleteComment(commentId);\n\n    setComments(current => current.filter(({ id }) => commentId !== id));\n  };\n\n  const handleAddComment = async (comment: Partial<PostComment>) => {\n    const newComment = await addComment(comment);\n\n    setComments(current => [...current, newComment]);\n  };\n\n  return post && (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        <p>{post.body}</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n        {comments.length ? (\n          <button\n            type=\"button\"\n            className=\"button\"\n            onClick={() => setIsHidden(current => !current)}\n          >\n            {isHidden\n              ? 'Show Comments'\n              : `Hide ${comments.length} comments` }\n          </button>\n        ) : (\n          <p>There is no comments</p>\n        )}\n        <ul className=\"PostDetails__list\">\n          {!isHidden && comments.map((comment) => {\n            return (\n              <li className=\"PostDetails__list-item\" key={comment.id}>\n                <button\n                  type=\"button\"\n                  className=\"PostDetails__remove-button button\"\n                  onClick={() => handleDeleteComment(comment.id)}\n                >\n                  X\n                </button>\n                <p>{comment.body}</p>\n              </li>\n            );\n          })}\n        </ul>\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            postId={postId}\n            addNewComment={handleAddComment}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { getUsers } from './api/post';\n\nconst App: React.FC = () => {\n  const [selectedUserId, handleUserId] = useState(0);\n  const [selectedPostId, handlePostId] = useState<number | null>(null);\n  const [users, setUsers] = useState<User[]>([]);\n\n  useEffect(() => {\n    getUsers().then(result => setUsers(result));\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label htmlFor=\"select\">\n          Select a user: &nbsp;\n\n          <select\n            id=\"select\"\n            className=\"App__user-selector\"\n            value={selectedUserId}\n            onChange={event => handleUserId(+event.target.value)}\n          >\n            <option value=\"0\">All users</option>\n            {users && (\n              users.map((user : User) => {\n                return (\n                  <option key={user.id} value={user.id}>{user.name}</option>\n                );\n              })\n            )}\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            selectedUserId={selectedUserId}\n            selectedPostId={selectedPostId}\n            handlePostId={handlePostId}\n          />\n        </div>\n\n        <div className=\"App__content\">\n          {selectedPostId ? (\n            <PostDetails postId={selectedPostId} />\n          ) : (\n            <h2>Select post to see details</h2>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}